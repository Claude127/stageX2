{% extends 'layout.html' %}

{% block title %}modification-profil{% endblock %}
{% load static %}
{% block link %}
<link rel="stylesheet" type="text/css" href="{% static 'css/profile-mod.css' %}" xmlns="http://www.w3.org/1999/html">{% endblock %}

{% block content %}


{% if user.is_authenticated %}


      <div class="sidebar ">
        <div class="logo-container">
          <div class="logo">
            <ion-icon name="eye" class="i"></ion-icon>
            <h3>Lab2View</h3>
          </div>
          <i class='bx bx-menu' id="btn" ></i>
        </div>


        <ul class="list">

        {% if user.role.nom == 'ADMIN' %}
            <li class="list-item" id="dash" >
              <a href="{% url 'dashboard' %}">
                <i class='bx bxs-dashboard'></i>
                <span class="links-name"  >Tableau de bord</span>
              </a>
              <span class="tooltip" >Tableau de bord</span>
            </li>
        {% endif %}

          <li class="list-item" >
            <a href="{% url 'file' %}">
              <ion-icon name="file-tray-stacked-outline" class="in"></ion-icon>
              <span class="links-name" id="fich">Fichiers</span>
            </a>
            <span class="tooltip">Fichiers</span>
          </li>

          <li class="list-item active" >
            <a href="{% url 'profile' %}">
              <i class='bx bx-user'></i>
              <span class="links-name">Profil</span>
            </a>
            <span class="tooltip">Profil</span>
          </li>


             {% if user.role.nom == 'ADMIN' %}
             <li class="list-item" id="list-users" >
              <a href="{% url 'admin:index' %}">
                <ion-icon name="id-card-outline" class="in"></ion-icon>
                <span class="links-name" >Espace Admin</span>
              </a>
              <span class="tooltip">Espace Admin</span>
            </li>
        {% endif %}



        </ul>
      </div>

        <div class="main-content">
          <header>
                <div class="title">
                  <h1>Modifier le profil</h1>
                </div>

                <div class="user">
                  <a href="{% url 'logout' %}">
                    <i class='bx bx-log-out'>
                      <span class="tooltip">log-out</span>
                    </i>

                  </a>



                  <div class="bg-img">
                      <img src="
                            {% if user.image %}
                                {{ MEDIA_URL }}{{ img }}
                            {% else %}
                                {% static 'img/unknkown_user.png' %}
                            {% endif %}
                                "
                           alt="profil">
                  </div>
                  <div class="nom-u">{{ prenom }} {{ nom }}</div>
                </div>

          </header>

        <main>
        <div class="box">

                  <div class="message-container">
                          {% if messages %}
                              {% for message in messages %}
                                  {{message}}
                              {% endfor %}
                          {% endif%}
                  </div>

                <form method="POST" enctype="multipart/form-data">

                   {% csrf_token %}

                  <div class="edit-img">
                     <img src="
                            {% if user.image %}
                                {{ MEDIA_URL }}{{ img }}
                            {% else %}
                                {% static 'img/unknkown_user.png' %}
                            {% endif %}
                                "
                           alt="profil">
                    <input type="file" name="image" id="file"  accept="image/*">
                    <label for="file">Editer</label>
                  </div>
                  <div class="edit-form">

                    <div class="mb-3">
                      <label for="name" class="form-label">Nom :</label>
                      <input type="text" class="form-control" id="name" name="name" value="{{ nom }}"  placeholder="Entrez votre nom" required>
                    </div>

                    <div class="mb-3">
                      <label for="surname" class="form-label">Prenom :</label>
                      <input type="text" class="form-control" id="surname" name="surname"  value="{{ prenom }}"  placeholder="Entrez votre prenom" required>
                    </div>


                    <div class="mb-3">
                      <label for="email" class="form-label">Email :</label>
                      <input type="email" class="form-control" id="Email" name="email" value="{{ email }}"  placeholder="Entrez votre email" required>
                    </div>


                    <div class="wrapper">
                      <div class="collapsible">
                        <input class="check" type="checkbox" id="collapsible-head">
                        <label class="maj" for="collapsible-head">Mot de passe</label>
                        <div class="collapisble-text">
                          <div class="mb-3">
                            <label for="an-password" class="form-label">Ancien mot de passe :</label>
                            <input type="password" class="form-control" id="an-password" name="old-password"   placeholder="Entrez votre ancien mot de passe" required>
                          </div>

                          <div class="mb-3">
                            <label for="password" class="form-label">nouveau mot de passe :</label>
                            <input type="password" class="form-control" id="password" name="new-password1"  placeholder="Entrez votre nouveau mot de passe" >
                          </div>

                          <div class="mb-3">
                            <label for="new-password" class="form-label">confirmez votre mot de passe :</label>
                            <input type="password" class="form-control" id="new-password" name="new-password2"  placeholder="confirmez votre mot de passe">
                          </div>
                         </div>
                        </div>
                  </div>
                  <div class="btn-valid">
                    <a href="{% url 'profile' %}" class="btn" id="annuler">Annuler</a>
                    <button class="btn">Modifier</button>
                  </div>


          </div>
        </form>
        </div>
        </main>
      </div>

{% endif %}

{% endblock %}